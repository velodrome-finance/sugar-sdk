# Sugar SDK


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Using Sugar

``` bash
pip install git+https://github.com/velodrome-finance/sugar-sdk
```

**TODO**: push to pypi

``` python
# load env
from dotenv import load_dotenv
load_dotenv()
```

    True

## Base quickstart

``` python
from sugar.chains import BaseChain

async with BaseChain() as chain:
    aero = [t for t in await chain.get_all_tokens() if t.symbol == 'AERO']
    print(await chain.get_prices(aero))
```

    [Price(token=Token(token_address='0x940181a94A35A4569E4529A3CDfB74e38FD98631', symbol='AERO', decimals=18, listed=True), price=0.875957)]

## OP quickstart

## Deposits

In order to deposit, make sure spender’s account’s private key is
provided via `SUGAR_PK` env var. Here’s how you can deposit
[vAMM-USDC/AERO](https://aerodrome.finance/deposit?token0=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913&token1=0x940181a94A35A4569E4529A3CDfB74e38FD98631&type=-1)

``` python
from sugar.chains import BaseChain
from sugar.deposit import Deposit

async with BaseChain() as chain:
    pools = await chain.get_pools()
    pools = list(filter(lambda x: "vAMM-USDC" in x.symbol and "AERO" in x.symbol, pools))
    # 0.02 USDC 
    await chain.deposit(Deposit(pools[0], 0.02))
```

## Configuration

Full list of configuration parameters for Sugar. Chain IDs can be found
[here](https://chainlist.org/). Sugar uses decimal versions: Base is
`8453`, OP is `10`.

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>config</th>
<th>env</th>
<th>default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpc_uri</td>
<td><code>SUGAR_RPC_URI_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>sugar_contract_addr</td>
<td><code>SUGAR_CONTRACT_ADDR_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>price_oracle_contract_addr</td>
<td><code>SUGAR_PRICE_ORACLE_ADDR_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>router_contract_addr</td>
<td><code>SUGAR_ROUTER_CONTRACT_ADDR_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>token_addr</td>
<td><code>SUGAR_TOKEN_ADDR_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>stable_token_addr</td>
<td><code>SUGAR_STABLE_TOKEN_ADDR_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>connector_tokens_addrs</td>
<td><code>SUGAR_CONNECTOR_TOKENS_ADDRS_&lt;CHAIN_ID&gt;</code></td>
<td>chain specific</td>
</tr>
<tr>
<td>price_batch_size</td>
<td><code>SUGAR_PRICE_BATCH_SIZE</code></td>
<td>40</td>
</tr>
<tr>
<td>price_threshold_filter</td>
<td><code>SUGAR_PRICE_THRESHOLD_FILTER</code></td>
<td>10</td>
</tr>
<tr>
<td>pool_page_size</td>
<td><code>SUGAR_POOL_PAGE_SIZE</code></td>
<td>500</td>
</tr>
<tr>
<td>pagination_limit</td>
<td><code>SUGAR_PAGINATION_LIMIT</code></td>
<td>2000</td>
</tr>
</tbody>
</table>

In order to write to Sugar contracts, you need to set your wallet
private key using env var `SUGAR_PK`

You can override specific settings in 2 ways:

- by setting corresponding env var: `SUGAR_RPC_URI_10=https://myrpc.com`
- in code:

``` python
from sugar.chains import OPChain

async with OPChain(rpc_uri="https://myrpc.com") as chain:
    ...
```

## Contributing to Sugar

### Set up and acivate python virtual env

``` bash
python3 -m venv env
source env/bin/activate
```

### Install dependencies

``` bash
pip install nbdev pre-commit
pip install -e '.[dev]'
```

### Install pre-commit hooks for nbdev prep and cleanup

``` bash
pre-commit install
```
